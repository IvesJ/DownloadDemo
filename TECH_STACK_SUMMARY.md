# Android ä¸‹è½½ç³»ç»Ÿ - æŠ€æœ¯æ ˆæ€»ç»“

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ Android ä¸‹è½½ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒï¼š
- æ–­ç‚¹ç»­ä¼ ä¸‹è½½
- MD5 æ–‡ä»¶æ ¡éªŒ
- å¢é‡æ›´æ–°
- æ–‡ä»¶æ¸…ç†
- å¼€æœºè‡ªå¯åŠ¨
- åå°ä¸‹è½½æœåŠ¡
- å®æ—¶è¿›åº¦æ˜¾ç¤º

é€‚ç”¨äºéœ€è¦ä¸‹è½½å’Œç®¡ç†å¤šä¸ªèµ„æºåŒ…çš„åº”ç”¨åœºæ™¯ï¼Œå¦‚æ¸¸æˆèµ„æºåŒ…ã€å±•è§ˆç´ æã€ç¦»çº¿æ•°æ®ç­‰ã€‚

## æŠ€æœ¯æ ˆä¸€è§ˆ

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Kotlin | 2.0.21 | ä¸»è¦å¼€å‘è¯­è¨€ |
| Android SDK | 34 (Target 36) | Android å¹³å° |
| Gradle | 8.7.0 | æ„å»ºå·¥å…· |
| Android Gradle Plugin | 8.7.0 | Android æ„å»ºæ’ä»¶ |

### æ¶æ„ä¸è®¾è®¡æ¨¡å¼

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| MVVM æ¶æ„ | - | æ¶æ„æ¨¡å¼ |
| Repository æ¨¡å¼ | - | æ•°æ®å±‚æŠ½è±¡ |
| Clean Architecture | - | åˆ†å±‚æ¶æ„ |
| Kotlin Coroutines | 1.7.3 | å¼‚æ­¥ç¼–ç¨‹ |
| Kotlin Flow | 1.7.3 | å“åº”å¼æ•°æ®æµ |
| StateFlow | 1.7.3 | çŠ¶æ€ç®¡ç† |

### UI å±‚

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| View Binding | - | è§†å›¾ç»‘å®š |
| RecyclerView | - | åˆ—è¡¨å±•ç¤º |
| Material Design 3 | 1.12.0 | UI ç»„ä»¶åº“ |
| ConstraintLayout | 2.1.4 | å¸ƒå±€ |
| XML Layouts | - | ç•Œé¢å¸ƒå±€ |

### ä¾èµ–æ³¨å…¥

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Hilt (Dagger) | 2.50 | ä¾èµ–æ³¨å…¥æ¡†æ¶ |
| @Singleton | - | å•ä¾‹ç®¡ç† |
| @Inject | - | æ„é€ å™¨æ³¨å…¥ |

### ç½‘ç»œä¸ä¸‹è½½

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| OkHttp | 4.12.0 | HTTP å®¢æˆ·ç«¯ |
| HTTP Range Requests | - | æ–­ç‚¹ç»­ä¼  |
| Coroutines + OkHttp | - | åç¨‹å¼‚æ­¥ä¸‹è½½ |

### æ•°æ®æŒä¹…åŒ–

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Room Database | 2.6.1 | æœ¬åœ°æ•°æ®åº“ |
| SharedPreferences | - | é…ç½®å­˜å‚¨ |
| File Storage | - | æ–‡ä»¶å­˜å‚¨ |

### JSON è§£æ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Gson | 2.10.1 | JSON åºåˆ—åŒ–/ååºåˆ—åŒ– |

### ç”Ÿå‘½å‘¨æœŸç®¡ç†

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Lifecycle | 2.7.0 | ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥ |
| ViewModel | 2.7.0 | UI çŠ¶æ€ç®¡ç† |
| ViewModelScope | - | ViewModel åç¨‹ä½œç”¨åŸŸ |
| LiveData / StateFlow | - | æ•°æ®è§‚å¯Ÿ |

### åå°ä»»åŠ¡

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Foreground Service | - | å‰å°æœåŠ¡ |
| Notification | - | é€šçŸ¥æ  |
| BroadcastReceiver | - | å¹¿æ’­æ¥æ”¶ |
| BOOT_COMPLETED | - | å¼€æœºè‡ªå¯åŠ¨ |

### å¹¶å‘æ§åˆ¶

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Semaphore | - | å¹¶å‘æ•°é™åˆ¶ |
| ConcurrentHashMap | - | çº¿ç¨‹å®‰å…¨ Map |
| Mutex | - | äº’æ–¥é” |
| Dispatchers.IO | - | IO çº¿ç¨‹æ±  |

### æ–‡ä»¶ä¸åŠ å¯†

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| MessageDigest (MD5) | - | æ–‡ä»¶æ ¡éªŒ |
| File I/O | - | æ–‡ä»¶è¯»å†™ |
| StatFs | - | ç£ç›˜ç©ºé—´æŸ¥è¯¢ |

### æµ‹è¯•ä¸è°ƒè¯•

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Android Log | - | æ—¥å¿—è¾“å‡º |
| Mock æ¨¡å¼ | - | æ¨¡æ‹Ÿä¸‹è½½ |

## é¡¹ç›®æ¶æ„

### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         UI Layer (Presentation)      â”‚
â”‚  MainActivity, ViewModel, Adapter    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Domain Layer (Business)       â”‚
â”‚  FeatureDownloadManager, UseCases    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Data Layer (Data)           â”‚
â”‚  Repository, ConfigParser, Models    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Core Layer (Infra)           â”‚
â”‚  Downloader, FileManager, Validator  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MVVM æ•°æ®æµ

```
View (MainActivity/Adapter)
  â†• observe StateFlow
ViewModel (DownloadViewModel)
  â†• call business logic
Domain (FeatureDownloadManager)
  â†• use repository & core
Data + Core (Repository + Downloader)
  â†• access network & storage
External (Network/File System)
```

### ç›®å½•ç»“æ„

```
app/src/main/java/com/ace/downloaddemo/
â”œâ”€â”€ core/                          # æ ¸å¿ƒåŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ download/                  # ä¸‹è½½å¼•æ“
â”‚   â”‚   â”œâ”€â”€ FileDownloader.kt      # ä¸‹è½½æ¥å£
â”‚   â”‚   â”œâ”€â”€ FileDownloaderImpl.kt  # ä¸‹è½½å®ç°ï¼ˆæ–­ç‚¹ç»­ä¼ ï¼‰
â”‚   â”‚   â”œâ”€â”€ DownloadWorker.kt      # å¹¶å‘ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ DownloadTask.kt        # ä»»åŠ¡æ¨¡å‹
â”‚   â”‚   â””â”€â”€ DownloadResult.kt      # ç»“æœå°è£…
â”‚   â”œâ”€â”€ storage/                   # å­˜å‚¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ FileManager.kt         # æ–‡ä»¶ç®¡ç†
â”‚   â”‚   â””â”€â”€ FileCleanupManager.kt  # æ–‡ä»¶æ¸…ç†
â”‚   â”œâ”€â”€ validation/                # æ ¡éªŒ
â”‚   â”‚   â””â”€â”€ MD5Validator.kt        # MD5æ ¡éªŒ
â”‚   â”œâ”€â”€ MockConfig.kt              # æ¨¡æ‹Ÿé…ç½®
â”‚   â””â”€â”€ AutoDownloadConfig.kt      # è‡ªå¯åŠ¨é…ç½®
â”œâ”€â”€ data/                          # æ•°æ®å±‚
â”‚   â”œâ”€â”€ model/                     # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ ConfigModels.kt        # JSONæ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ parser/                    # è§£æå™¨
â”‚   â”‚   â””â”€â”€ ConfigParser.kt        # é…ç½®è§£æ
â”‚   â”œâ”€â”€ local/                     # æœ¬åœ°å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ DownloadDatabase.kt    # Roomæ•°æ®åº“
â”‚   â”‚   â””â”€â”€ DownloadDao.kt         # æ•°æ®è®¿é—®å¯¹è±¡
â”‚   â””â”€â”€ repository/                # ä»“åº“
â”‚       â””â”€â”€ DownloadRepository.kt  # æ•°æ®ä»“åº“
â”œâ”€â”€ domain/                        # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ FeatureDownloadManager.kt  # Featureä¸‹è½½ç®¡ç†
â”‚   â”œâ”€â”€ UpdateCheckResult.kt       # æ›´æ–°æ£€æŸ¥ç»“æœ
â”‚   â””â”€â”€ model/
â”‚       â””â”€â”€ FeatureDownloadState.kt # FeatureçŠ¶æ€
â”œâ”€â”€ ui/                            # UIå±‚
â”‚   â”œâ”€â”€ MainActivity.kt            # ä¸»Activity
â”‚   â”œâ”€â”€ DownloadViewModel.kt       # ViewModel
â”‚   â”œâ”€â”€ adapter/
â”‚   â”‚   â””â”€â”€ FeatureListAdapter.kt  # RecyclerViewé€‚é…å™¨
â”‚   â””â”€â”€ model/
â”‚       â””â”€â”€ FeatureUIState.kt      # UIçŠ¶æ€æ¨¡å‹
â”œâ”€â”€ service/                       # æœåŠ¡
â”‚   â””â”€â”€ AutoDownloadService.kt     # è‡ªåŠ¨ä¸‹è½½æœåŠ¡
â”œâ”€â”€ receiver/                      # å¹¿æ’­æ¥æ”¶å™¨
â”‚   â””â”€â”€ BootCompletedReceiver.kt   # å¼€æœºå¹¿æ’­
â””â”€â”€ DownloadApplication.kt         # Applicationç±»
```

## æ ¸å¿ƒæŠ€æœ¯è¯¦è§£

### 1. Kotlin Coroutinesï¼ˆåç¨‹ï¼‰

**ç”¨é€”**: å¼‚æ­¥ç¼–ç¨‹ï¼Œæ›¿ä»£ AsyncTask å’Œ Thread

**æ ¸å¿ƒæ¦‚å¿µ**:
- `suspend fun`: æŒ‚èµ·å‡½æ•°ï¼Œå¯ä»¥æš‚åœæ‰§è¡Œ
- `launch`: å¯åŠ¨æ–°åç¨‹
- `async/await`: å¹¶å‘æ‰§è¡Œå¹¶ç­‰å¾…ç»“æœ
- `withContext`: åˆ‡æ¢åç¨‹ä¸Šä¸‹æ–‡

**å®é™…åº”ç”¨**:

```kotlin
// DownloadViewModel.kt
fun loadConfig() {
    viewModelScope.launch {  // åœ¨ViewModelä½œç”¨åŸŸå¯åŠ¨åç¨‹
        _isLoading.value = true

        try {
            // suspendå‡½æ•°ï¼Œå¯ä»¥åœ¨åç¨‹ä¸­è°ƒç”¨
            val config = configParser.parse("download.json")

            // åˆ‡æ¢åˆ°IOçº¿ç¨‹
            withContext(Dispatchers.IO) {
                // æ–‡ä»¶æ“ä½œ
            }
        } catch (e: Exception) {
            // å¼‚å¸¸å¤„ç†
        } finally {
            _isLoading.value = false
        }
    }
}
```

**ä¼˜åŠ¿**:
- ä»£ç ç®€æ´ï¼Œé¿å…å›è°ƒåœ°ç‹±
- è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼ˆviewModelScopeï¼‰
- è½»é‡çº§ï¼Œæ€§èƒ½ä¼˜äºçº¿ç¨‹
- ç»“æ„åŒ–å¹¶å‘ï¼Œæ˜“äºå–æ¶ˆå’Œé”™è¯¯å¤„ç†

### 2. Kotlin Flow & StateFlowï¼ˆå“åº”å¼ç¼–ç¨‹ï¼‰

**ç”¨é€”**: å¼‚æ­¥æ•°æ®æµï¼Œå®ç°å“åº”å¼UIæ›´æ–°

**Flow vs StateFlow**:
- `Flow`: å†·æµï¼Œåªæœ‰è®¢é˜…æ—¶æ‰å¼€å§‹å‘å°„æ•°æ®
- `StateFlow`: çƒ­æµï¼Œå§‹ç»ˆæœ‰å½“å‰å€¼ï¼Œé€‚åˆçŠ¶æ€ç®¡ç†

**å®é™…åº”ç”¨**:

```kotlin
// FeatureDownloadManager.kt
private val featureStates = ConcurrentHashMap<Int, MutableStateFlow<FeatureDownloadState>>()

fun getFeatureState(featureId: Int): StateFlow<FeatureDownloadState> {
    return featureStates.getOrPut(featureId) {
        MutableStateFlow(FeatureDownloadState.Idle)
    }.asStateFlow()
}

// DownloadViewModel.kt
features.forEach { feature ->
    viewModelScope.launch {
        featureDownloadManager.getFeatureState(feature.id).collect { state ->
            updateFeatureState(feature.id, state)  // è‡ªåŠ¨æ›´æ–°UI
        }
    }
}
```

**ä¼˜åŠ¿**:
- å£°æ˜å¼ç¼–ç¨‹ï¼Œæ•°æ®é©±åŠ¨UI
- è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- çº¿ç¨‹å®‰å…¨
- èƒŒå‹å¤„ç†ï¼ˆbackpressureï¼‰

### 3. Hilt ä¾èµ–æ³¨å…¥

**ç”¨é€”**: è‡ªåŠ¨ç®¡ç†ä¾èµ–ï¼Œè§£è€¦ç»„ä»¶

**æ ¸å¿ƒæ³¨è§£**:
- `@HiltAndroidApp`: Applicationç±»
- `@AndroidEntryPoint`: Activity/Fragment
- `@HiltViewModel`: ViewModel
- `@Inject`: æ³¨å…¥ä¾èµ–
- `@Singleton`: å•ä¾‹

**å®é™…åº”ç”¨**:

```kotlin
// DownloadApplication.kt
@HiltAndroidApp
class DownloadApplication : Application()

// DownloadViewModel.kt
@HiltViewModel
class DownloadViewModel @Inject constructor(
    private val configParser: ConfigParser,
    private val featureDownloadManager: FeatureDownloadManager,
    private val fileCleanupManager: FileCleanupManager
) : ViewModel()

// FileManager.kt
@Singleton
class FileManager @Inject constructor(
    @ApplicationContext private val context: Context,
    private val md5Validator: MD5Validator
)
```

**ä¼˜åŠ¿**:
- å‡å°‘æ ·æ¿ä»£ç 
- è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ
- æ”¯æŒå•ä¾‹å’Œä½œç”¨åŸŸ
- ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œè¿è¡Œæ—¶å®‰å…¨

### 4. MVVM æ¶æ„

**åˆ†å±‚èŒè´£**:

```
View (Activity/Fragment)
  - æ˜¾ç¤ºUI
  - ç›‘å¬ç”¨æˆ·äº¤äº’
  - è§‚å¯ŸViewModelçŠ¶æ€
  â†“
ViewModel
  - æŒæœ‰UIçŠ¶æ€ï¼ˆStateFlowï¼‰
  - å¤„ç†ç”¨æˆ·äº¤äº’
  - è°ƒç”¨ä¸šåŠ¡é€»è¾‘
  - ä¸æŒæœ‰Viewå¼•ç”¨
  â†“
Model (Domain + Data)
  - ä¸šåŠ¡é€»è¾‘
  - æ•°æ®å¤„ç†
  - ç½‘ç»œ/æ•°æ®åº“è®¿é—®
```

**å®é™…åº”ç”¨**:

```kotlin
// MainActivity.kt (View)
private fun observeViewModel() {
    lifecycleScope.launch {
        viewModel.featuresState.collect { features ->
            adapter.submitList(features)  // æ›´æ–°UI
        }
    }
}

// DownloadViewModel.kt (ViewModel)
private val _featuresState = MutableStateFlow<List<FeatureUIState>>(emptyList())
val featuresState: StateFlow<List<FeatureUIState>> = _featuresState.asStateFlow()

fun downloadFeature(featureId: Int) {
    viewModelScope.launch {
        featureDownloadManager.downloadFeature(featureId, files)
    }
}

// FeatureDownloadManager.kt (Model)
suspend fun downloadFeature(featureId: Int, files: List<FileInfo>) {
    // ä¸šåŠ¡é€»è¾‘å®ç°
}
```

**ä¼˜åŠ¿**:
- å…³æ³¨ç‚¹åˆ†ç¦»
- æ˜“äºæµ‹è¯•
- ç”Ÿå‘½å‘¨æœŸå®‰å…¨
- é…ç½®å˜æ›´è‡ªåŠ¨æ¢å¤

### 5. HTTP æ–­ç‚¹ç»­ä¼ 

**åŸç†**: ä½¿ç”¨ HTTP Range è¯·æ±‚å¤´

**å®é™…åº”ç”¨**:

```kotlin
// FileDownloaderImpl.kt
suspend fun download(task: DownloadTask): DownloadResult {
    val tempFile = File("${task.savePath}.downloading")
    val downloaded = if (tempFile.exists()) tempFile.length() else 0L

    // Rangeè¯·æ±‚ï¼Œä»å·²ä¸‹è½½ä½ç½®ç»§ç»­
    val request = Request.Builder()
        .url(task.url)
        .header("Range", "bytes=$downloaded-")
        .build()

    val response = client.newCall(request).execute()

    // è¿½åŠ æ¨¡å¼å†™å…¥æ–‡ä»¶
    FileOutputStream(tempFile, true).use { output ->
        response.body?.byteStream()?.use { input ->
            val buffer = ByteArray(8192)
            var bytesRead: Int
            var currentDownloaded = downloaded

            while (input.read(buffer).also { bytesRead = it } != -1) {
                output.write(buffer, 0, bytesRead)
                currentDownloaded += bytesRead
                task.onProgress(currentDownloaded, totalSize)
            }
        }
    }

    // ä¸‹è½½å®Œæˆï¼Œé‡å‘½åä¸ºæ­£å¼æ–‡ä»¶
    tempFile.renameTo(File(task.savePath))
}
```

**å…³é”®ç‚¹**:
- HTTP 206 Partial Content å“åº”
- ä¸´æ—¶æ–‡ä»¶ `.downloading` åç¼€
- FileOutputStream è¿½åŠ æ¨¡å¼
- ä¸‹è½½å®Œæˆåé‡å‘½å

### 6. MD5 æ–‡ä»¶æ ¡éªŒ

**åŸç†**: MessageDigest è®¡ç®—å“ˆå¸Œå€¼

**å®é™…åº”ç”¨**:

```kotlin
// MD5Validator.kt
suspend fun calculateMD5(file: File): String = withContext(Dispatchers.IO) {
    val digest = MessageDigest.getInstance("MD5")

    file.inputStream().use { input ->
        val buffer = ByteArray(8192)
        var bytesRead: Int

        while (input.read(buffer).also { bytesRead = it } != -1) {
            digest.update(buffer, 0, bytesRead)
        }
    }

    // è½¬æ¢ä¸º16è¿›åˆ¶å­—ç¬¦ä¸²
    digest.digest().joinToString("") { "%02x".format(it) }
}

suspend fun validate(file: File, expectedMd5: String): Boolean {
    val calculatedMd5 = calculateMD5(file)
    return calculatedMd5.equals(expectedMd5, ignoreCase = true)
}
```

**ä¼˜åŒ–**:
- ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤è®¡ç®—
- åˆ†å—è¯»å–ï¼Œé¿å…å¤§æ–‡ä»¶OOM
- åœ¨IOçº¿ç¨‹æ‰§è¡Œ

### 7. å¹¶å‘æ§åˆ¶ï¼ˆSemaphoreï¼‰

**åŸç†**: é™åˆ¶åŒæ—¶æ‰§è¡Œçš„åç¨‹æ•°é‡

**å®é™…åº”ç”¨**:

```kotlin
// DownloadWorker.kt
@Singleton
class DownloadWorker @Inject constructor(
    private val downloader: FileDownloader
) {
    private val semaphore = Semaphore(3)  // æœ€å¤š3ä¸ªå¹¶å‘ä¸‹è½½

    suspend fun downloadFile(task: DownloadTask): DownloadResult {
        semaphore.acquire()  // è·å–è®¸å¯
        return try {
            downloader.download(task)
        } finally {
            semaphore.release()  // é‡Šæ”¾è®¸å¯
        }
    }
}
```

**ä¼˜åŠ¿**:
- é˜²æ­¢èµ„æºè€—å°½
- æ§åˆ¶ç½‘ç»œå¸¦å®½å ç”¨
- é¿å…çº¿ç¨‹è¿‡å¤š

### 8. Room æ•°æ®åº“

**ç”¨é€”**: æœ¬åœ°æ•°æ®æŒä¹…åŒ–

**æ ¸å¿ƒç»„ä»¶**:
- `@Entity`: æ•°æ®è¡¨
- `@Dao`: æ•°æ®è®¿é—®å¯¹è±¡
- `@Database`: æ•°æ®åº“

**å®é™…åº”ç”¨**:

```kotlin
// DownloadRecord.kt
@Entity(tableName = "downloads")
data class DownloadRecord(
    @PrimaryKey val id: Int,
    val featureId: Int,
    val fileName: String,
    val status: String,
    val downloadedBytes: Long,
    val totalBytes: Long
)

// DownloadDao.kt
@Dao
interface DownloadDao {
    @Query("SELECT * FROM downloads WHERE featureId = :featureId")
    suspend fun getDownloadsByFeature(featureId: Int): List<DownloadRecord>

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    suspend fun insert(record: DownloadRecord)

    @Delete
    suspend fun delete(record: DownloadRecord)
}

// DownloadDatabase.kt
@Database(entities = [DownloadRecord::class], version = 1)
abstract class DownloadDatabase : RoomDatabase() {
    abstract fun downloadDao(): DownloadDao
}
```

### 9. Foreground Serviceï¼ˆå‰å°æœåŠ¡ï¼‰

**ç”¨é€”**: æ‰§è¡Œé•¿æ—¶é—´è¿è¡Œçš„åå°ä»»åŠ¡

**å®é™…åº”ç”¨**:

```kotlin
// AutoDownloadService.kt
class AutoDownloadService : Service() {

    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {
        // åˆ›å»ºé€šçŸ¥
        val notification = createNotification("å‡†å¤‡ä¸‹è½½", 0)

        // å¯åŠ¨å‰å°æœåŠ¡
        startForeground(NOTIFICATION_ID, notification)

        // æ‰§è¡Œä¸‹è½½ä»»åŠ¡
        startAutoDownload()

        return START_STICKY
    }

    private fun createNotification(content: String, progress: Int): Notification {
        return NotificationCompat.Builder(this, CHANNEL_ID)
            .setContentTitle("è‡ªåŠ¨ä¸‹è½½æœåŠ¡")
            .setContentText(content)
            .setProgress(100, progress, false)
            .setSmallIcon(android.R.drawable.stat_sys_download)
            .build()
    }
}
```

**å…³é”®ç‚¹**:
- Android 8.0+ å¿…é¡»ä½¿ç”¨å‰å°æœåŠ¡
- å¿…é¡»æ˜¾ç¤ºæŒä¹…é€šçŸ¥
- éœ€è¦ FOREGROUND_SERVICE æƒé™
- Android 14+ éœ€è¦æŒ‡å®š foregroundServiceType

### 10. BroadcastReceiverï¼ˆå¼€æœºè‡ªå¯åŠ¨ï¼‰

**ç”¨é€”**: ç›‘å¬ç³»ç»Ÿå¹¿æ’­

**å®é™…åº”ç”¨**:

```kotlin
// BootCompletedReceiver.kt
class BootCompletedReceiver : BroadcastReceiver() {
    override fun onReceive(context: Context, intent: Intent) {
        when (intent.action) {
            Intent.ACTION_BOOT_COMPLETED -> {
                val config = AutoDownloadConfig(context)
                if (config.autoStartOnBoot) {
                    AutoDownloadService.start(context)
                }
            }
        }
    }
}

// AndroidManifest.xml
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<receiver
    android:name=".receiver.BootCompletedReceiver"
    android:enabled="true"
    android:exported="true">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver>
```

## å…³é”®æŠ€æœ¯å®ç°

### 1. å¢é‡æ›´æ–°æ£€æŸ¥

```kotlin
suspend fun checkForUpdates(featureId: Int, files: List<FileInfo>): UpdateCheckResult {
    val filesToDownload = mutableListOf<FileInfo>()
    val filesToDelete = mutableListOf<String>()
    val upToDateFiles = mutableListOf<String>()

    for (file in files) {
        val localFile = File(fileManager.getFilePath(file.fileName))

        if (!localFile.exists()) {
            filesToDownload.add(file)  // æ–‡ä»¶ä¸å­˜åœ¨
        } else {
            if (md5Validator.validate(localFile, file.fileMd5)) {
                upToDateFiles.add(file.fileName)  // MD5åŒ¹é…
            } else {
                filesToDelete.add(file.fileName)  // MD5ä¸åŒ¹é…
                filesToDownload.add(file)
            }
        }
    }

    return UpdateCheckResult(
        featureId = featureId,
        totalFiles = files.size,
        upToDateFiles = upToDateFiles.size,
        filesToDownload = filesToDownload,
        filesToDelete = filesToDelete
    )
}
```

### 2. æ–‡ä»¶æ¸…ç†

```kotlin
suspend fun scanAndCleanUnusedFiles(config: DownloadConfig): CleanupResult {
    // 1. è·å–é…ç½®ä¸­æ‰€æœ‰éœ€è¦çš„æ–‡ä»¶
    val requiredFiles = getAllRequiredFiles(config)

    // 2. è·å–æœ¬åœ°æ‰€æœ‰æ–‡ä»¶
    val localFiles = fileManager.getDownloadDir().listFiles()

    // 3. æ‰¾å‡ºå­¤å„¿æ–‡ä»¶
    val unusedFiles = localFiles.filter { file ->
        !file.name.endsWith(".downloading") &&
        !requiredFiles.contains(file.name)
    }

    // 4. åˆ é™¤å­¤å„¿æ–‡ä»¶
    var deletedCount = 0
    var freedSpace = 0L

    for (file in unusedFiles) {
        val fileSize = file.length()
        if (file.delete()) {
            deletedCount++
            freedSpace += fileSize
        }
    }

    return CleanupResult(
        totalFiles = localFiles.size,
        deletedFiles = deletedCount,
        freedSpaceBytes = freedSpace,
        deletedFileNames = unusedFiles.map { it.name }
    )
}
```

### 3. é€’å½’JSONè§£æ

```kotlin
fun extractAllFiles(feature: FeatureConfig): List<FileInfo> {
    val files = mutableListOf<FileInfo>()

    // é€’å½’å‡½æ•°ï¼šéå†æ‰€æœ‰tabså’ŒsubTabs
    fun traverseTabs(tabs: List<ConfigTab>) {
        tabs.forEach { tab ->
            tab.contents.forEach { content ->
                files.addAll(content.fileInfos)
            }
            traverseTabs(tab.subTabs)  // é€’å½’è°ƒç”¨
        }
    }

    // æ·»åŠ ä¸»èµ„æºåŒ…
    files.add(createZipFileInfo(feature))

    // éå†æ‰€æœ‰tabs
    traverseTabs(feature.configTabs)

    return files
}
```

### 4. çŠ¶æ€ç®¡ç†ï¼ˆSealed Classï¼‰

```kotlin
sealed class FeatureDownloadState {
    object Idle : FeatureDownloadState()

    data class Downloading(
        val progress: Float,        // 0.0 ~ 1.0
        val currentFile: String,
        val completedFiles: Int,
        val totalFiles: Int
    ) : FeatureDownloadState()

    object Completed : FeatureDownloadState()

    data class Failed(
        val error: String,
        val failedFile: String
    ) : FeatureDownloadState()

    object Canceled : FeatureDownloadState()
}

// ä½¿ç”¨whenè¡¨è¾¾å¼å¤„ç†æ‰€æœ‰çŠ¶æ€
when (state) {
    is FeatureDownloadState.Idle -> showDownloadButton()
    is FeatureDownloadState.Downloading -> showProgress(state.progress)
    is FeatureDownloadState.Completed -> showOpenButton()
    is FeatureDownloadState.Failed -> showRetryButton(state.error)
    is FeatureDownloadState.Canceled -> showIdleState()
}
```

## å­¦ä¹ è·¯å¾„å»ºè®®

### é˜¶æ®µ1: Kotlin åŸºç¡€ï¼ˆ1-2å‘¨ï¼‰

**å¿…å­¦å†…å®¹**:
- Kotlin åŸºæœ¬è¯­æ³•
- ç©ºå®‰å…¨ï¼ˆNullable Typesï¼‰
- æ‰©å±•å‡½æ•°
- é«˜é˜¶å‡½æ•°ä¸ Lambda
- æ•°æ®ç±»ï¼ˆData Classï¼‰
- å¯†å°ç±»ï¼ˆSealed Classï¼‰

**æ¨èèµ„æº**:
- [Kotlin å®˜æ–¹æ–‡æ¡£](https://kotlinlang.org/docs/home.html)
- [Kotlin Koans](https://play.kotlinlang.org/koans)

### é˜¶æ®µ2: Android åŸºç¡€ï¼ˆ2-3å‘¨ï¼‰

**å¿…å­¦å†…å®¹**:
- Activity ç”Ÿå‘½å‘¨æœŸ
- Fragment
- RecyclerView
- Intent å’Œ Bundle
- æƒé™ç³»ç»Ÿ
- èµ„æºç®¡ç†ï¼ˆLayout, String, Drawableï¼‰

**æ¨èèµ„æº**:
- [Android Developer å®˜æ–¹æ–‡æ¡£](https://developer.android.com/)
- [Android Basics in Kotlin](https://developer.android.com/courses/android-basics-kotlin/course)

### é˜¶æ®µ3: Kotlin Coroutinesï¼ˆ1-2å‘¨ï¼‰

**å¿…å­¦å†…å®¹**:
- åç¨‹åŸºç¡€æ¦‚å¿µ
- suspend å‡½æ•°
- CoroutineScope å’Œ CoroutineContext
- Dispatchersï¼ˆçº¿ç¨‹è°ƒåº¦ï¼‰
- launch å’Œ async
- å¼‚å¸¸å¤„ç†
- å–æ¶ˆå’Œè¶…æ—¶

**æ¨èèµ„æº**:
- [Kotlin Coroutines å®˜æ–¹æ–‡æ¡£](https://kotlinlang.org/docs/coroutines-overview.html)
- [Coroutines Codelab](https://developer.android.com/codelabs/kotlin-coroutines)

### é˜¶æ®µ4: Kotlin Flowï¼ˆ1å‘¨ï¼‰

**å¿…å­¦å†…å®¹**:
- Flow åŸºç¡€
- StateFlow å’Œ SharedFlow
- Flow æ“ä½œç¬¦ï¼ˆmap, filter, collectï¼‰
- å†·æµ vs çƒ­æµ
- Flow å’Œ LiveData å¯¹æ¯”

**æ¨èèµ„æº**:
- [Kotlin Flow å®˜æ–¹æ–‡æ¡£](https://kotlinlang.org/docs/flow.html)
- [StateFlow and SharedFlow](https://developer.android.com/kotlin/flow/stateflow-and-sharedflow)

### é˜¶æ®µ5: MVVM æ¶æ„ï¼ˆ1-2å‘¨ï¼‰

**å¿…å­¦å†…å®¹**:
- ViewModel
- LiveData / StateFlow
- ViewBinding
- Repository æ¨¡å¼
- æ•°æ®æµå‘å’ŒèŒè´£åˆ’åˆ†

**æ¨èèµ„æº**:
- [Guide to app architecture](https://developer.android.com/topic/architecture)
- [ViewModel Overview](https://developer.android.com/topic/libraries/architecture/viewmodel)

### é˜¶æ®µ6: ä¾èµ–æ³¨å…¥ - Hiltï¼ˆ1å‘¨ï¼‰

**å¿…å­¦å†…å®¹**:
- ä¾èµ–æ³¨å…¥æ¦‚å¿µ
- Hilt åŸºç¡€æ³¨è§£
- Module å’Œ Provider
- ä½œç”¨åŸŸç®¡ç†
- æµ‹è¯•ä¸­çš„ä¾èµ–æ³¨å…¥

**æ¨èèµ„æº**:
- [Hilt å®˜æ–¹æ–‡æ¡£](https://developer.android.com/training/dependency-injection/hilt-android)
- [Dependency Injection with Hilt](https://developer.android.com/codelabs/android-hilt)

### é˜¶æ®µ7: ç½‘ç»œç¼–ç¨‹ï¼ˆ1-2å‘¨ï¼‰

**å¿…å­¦å†…å®¹**:
- OkHttp ä½¿ç”¨
- HTTP åè®®åŸºç¡€
- å¼‚æ­¥ç½‘ç»œè¯·æ±‚
- é”™è¯¯å¤„ç†å’Œé‡è¯•
- æ–­ç‚¹ç»­ä¼ åŸç†

**æ¨èèµ„æº**:
- [OkHttp å®˜æ–¹æ–‡æ¡£](https://square.github.io/okhttp/)
- [HTTP åè®®è¯¦è§£](https://developer.mozilla.org/en-US/docs/Web/HTTP)

### é˜¶æ®µ8: æ•°æ®æŒä¹…åŒ–ï¼ˆ1-2å‘¨ï¼‰

**å¿…å­¦å†…å®¹**:
- Room æ•°æ®åº“
- SharedPreferences
- æ–‡ä»¶å­˜å‚¨
- æ•°æ®è¿ç§»

**æ¨èèµ„æº**:
- [Room å®˜æ–¹æ–‡æ¡£](https://developer.android.com/training/data-storage/room)
- [Save data in a local database](https://developer.android.com/codelabs/android-room-with-a-view-kotlin)

### é˜¶æ®µ9: åå°ä»»åŠ¡ï¼ˆ1å‘¨ï¼‰

**å¿…å­¦å†…å®¹**:
- Service å’Œ Foreground Service
- WorkManager
- BroadcastReceiver
- Notification

**æ¨èèµ„æº**:
- [Services Overview](https://developer.android.com/guide/components/services)
- [WorkManager](https://developer.android.com/topic/libraries/architecture/workmanager)

### é˜¶æ®µ10: å®æˆ˜é¡¹ç›®ï¼ˆ2-4å‘¨ï¼‰

**å»ºè®®**:
- å…‹éš†æœ¬é¡¹ç›®ï¼Œé€æ­¥ç†è§£æ¯ä¸ªæ¨¡å—
- å°è¯•ä¿®æ”¹å’Œæ‰©å±•åŠŸèƒ½
- æ·»åŠ å•å…ƒæµ‹è¯•å’ŒUIæµ‹è¯•
- ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ

## Android å¼€å‘æœ€ä½³å®è·µ

### 1. æ¶æ„è®¾è®¡

âœ… **æ¨èåšæ³•**:
- ä½¿ç”¨ MVVM æˆ– MVI æ¶æ„
- åˆ†å±‚æ˜ç¡®ï¼Œå•ä¸€èŒè´£
- ViewModel ä¸æŒæœ‰ Context æˆ– View å¼•ç”¨
- ä½¿ç”¨ Repository æŠ½è±¡æ•°æ®æº

âŒ **é¿å…**:
- åœ¨ Activity/Fragment ä¸­å†™ä¸šåŠ¡é€»è¾‘
- ç›´æ¥åœ¨ UI å±‚è®¿é—®ç½‘ç»œæˆ–æ•°æ®åº“
- ä½¿ç”¨å…¨å±€å˜é‡ç®¡ç†çŠ¶æ€

### 2. åç¨‹ä½¿ç”¨

âœ… **æ¨èåšæ³•**:
- ä½¿ç”¨ç»“æ„åŒ–å¹¶å‘ï¼ˆviewModelScope, lifecycleScopeï¼‰
- ä½¿ç”¨ withContext åˆ‡æ¢çº¿ç¨‹
- ä½¿ç”¨ supervisorScope é¿å…å­åç¨‹å¼‚å¸¸å¯¼è‡´çˆ¶åç¨‹å–æ¶ˆ
- æ­£ç¡®å¤„ç†å¼‚å¸¸å’Œå–æ¶ˆ

âŒ **é¿å…**:
- ä½¿ç”¨ GlobalScopeï¼ˆç”Ÿå‘½å‘¨æœŸä¸å¯æ§ï¼‰
- å¿˜è®°å¤„ç†åç¨‹å¼‚å¸¸
- åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œ

### 3. å†…å­˜ç®¡ç†

âœ… **æ¨èåšæ³•**:
- ä½¿ç”¨ WeakReference é¿å…å†…å­˜æ³„æ¼
- åŠæ—¶å–æ¶ˆè®¢é˜…å’Œç›‘å¬å™¨
- ä½¿ç”¨ Lifecycle æ„ŸçŸ¥ç»„ä»¶
- åˆ†å—è¯»å†™å¤§æ–‡ä»¶

âŒ **é¿å…**:
- Activity æ³„æ¼
- é™æ€æŒæœ‰ Context
- åŠ è½½å¤§å›¾ç‰‡ä¸å‹ç¼©

### 4. é”™è¯¯å¤„ç†

âœ… **æ¨èåšæ³•**:
- ä½¿ç”¨ Result/Either å°è£…ç»“æœ
- ç»Ÿä¸€å¼‚å¸¸å¤„ç†
- æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- è®°å½•è¯¦ç»†æ—¥å¿—

âŒ **é¿å…**:
- åæ‰å¼‚å¸¸ä¸å¤„ç†
- æš´éœ²æŠ€æœ¯ç»†èŠ‚ç»™ç”¨æˆ·
- å´©æºƒåä¸æ¢å¤çŠ¶æ€

### 5. æ€§èƒ½ä¼˜åŒ–

âœ… **æ¨èåšæ³•**:
- ä½¿ç”¨ RecyclerView è€Œé ListView
- ä½¿ç”¨ ViewBinding è€Œé findViewById
- å›¾ç‰‡æ‡’åŠ è½½å’Œç¼“å­˜
- é¿å…è¿‡åº¦ç»˜åˆ¶

âŒ **é¿å…**:
- ä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œ
- é¢‘ç¹åˆ›å»ºå¯¹è±¡
- åµŒå¥—è¿‡æ·±çš„å¸ƒå±€

### 6. å®‰å…¨æ€§

âœ… **æ¨èåšæ³•**:
- ä½¿ç”¨ HTTPS
- æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- æ ¡éªŒç”¨æˆ·è¾“å…¥
- ä½¿ç”¨ ProGuard/R8 æ··æ·†ä»£ç 

âŒ **é¿å…**:
- ç¡¬ç¼–ç å¯†é’¥
- æ˜æ–‡å­˜å‚¨å¯†ç 
- ä¿¡ä»»æ‰€æœ‰è¯ä¹¦

## é¡¹ç›®ç‰¹è‰²äº®ç‚¹

### 1. å®Œæ•´çš„ä¸‹è½½ç³»ç»Ÿ

- âœ… æ–­ç‚¹ç»­ä¼ 
- âœ… MD5 æ ¡éªŒ
- âœ… å¹¶å‘æ§åˆ¶
- âœ… è¿›åº¦å›è°ƒ
- âœ… é”™è¯¯é‡è¯•

### 2. æ™ºèƒ½æ›´æ–°æœºåˆ¶

- âœ… å¢é‡æ›´æ–°æ£€æŸ¥
- âœ… æ–‡ä»¶ç‰ˆæœ¬å¯¹æ¯”
- âœ… è‡ªåŠ¨æ¸…ç†å­¤å„¿æ–‡ä»¶
- âœ… ç£ç›˜ç©ºé—´ç®¡ç†

### 3. åå°æœåŠ¡

- âœ… å¼€æœºè‡ªå¯åŠ¨
- âœ… å‰å°æœåŠ¡ä¿æ´»
- âœ… é€šçŸ¥æ è¿›åº¦æ˜¾ç¤º
- âœ… åå°è‡ªåŠ¨ä¸‹è½½

### 4. ç°ä»£åŒ–æ¶æ„

- âœ… MVVM + Clean Architecture
- âœ… Kotlin Coroutines + Flow
- âœ… Hilt ä¾èµ–æ³¨å…¥
- âœ… Repository æ¨¡å¼

### 5. å¼€å‘å‹å¥½

- âœ… è¯¦ç»†æ—¥å¿—è¾“å‡ºï¼ˆå¸¦ emojiï¼‰
- âœ… Mock æ¨¡å¼æ”¯æŒ
- âœ… å®Œæ•´æ–‡æ¡£
- âœ… æ¸…æ™°çš„ä»£ç ç»“æ„

## å¸¸è§é—®é¢˜è§£ç­”

### Q1: ä¸ºä»€ä¹ˆé€‰æ‹© Kotlin è€Œä¸æ˜¯ Javaï¼Ÿ

**ç­”**:
- Kotlin æ˜¯ Android å®˜æ–¹æ¨èè¯­è¨€
- æ›´ç®€æ´çš„è¯­æ³•ï¼Œå‡å°‘æ ·æ¿ä»£ç 
- ç©ºå®‰å…¨ç‰¹æ€§ï¼Œå‡å°‘ NullPointerException
- åç¨‹æ”¯æŒï¼Œå¼‚æ­¥ç¼–ç¨‹æ›´ç®€å•
- ç°ä»£åŒ–ç‰¹æ€§ï¼ˆæ‰©å±•å‡½æ•°ã€æ•°æ®ç±»ç­‰ï¼‰

### Q2: ä¸ºä»€ä¹ˆä½¿ç”¨ StateFlow è€Œä¸æ˜¯ LiveDataï¼Ÿ

**ç­”**:
- StateFlow æ˜¯ Kotlin åŸç”Ÿï¼ŒLiveData æ˜¯ Android ç‰¹æœ‰
- StateFlow å¯ä»¥åœ¨é Android æ¨¡å—ä½¿ç”¨ï¼ˆå¦‚çº¯ Kotlin æ¨¡å—ï¼‰
- StateFlow æ›´é€‚åˆ Kotlin Coroutines
- StateFlow æ”¯æŒæ›´ä¸°å¯Œçš„æ“ä½œç¬¦
- ä½† LiveData ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥æ›´å¼ºï¼Œä¸¤è€…å„æœ‰ä¼˜åŠ¿

### Q3: ä¸ºä»€ä¹ˆä½¿ç”¨ Hilt è€Œä¸æ˜¯ Koinï¼Ÿ

**ç­”**:
- Hilt æ˜¯ Google å®˜æ–¹æ¨è
- ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œç±»å‹å®‰å…¨
- ä¸ Jetpack æ·±åº¦é›†æˆ
- ä½† Koin æ›´è½»é‡ï¼Œå­¦ä¹ æ›²çº¿æ›´å¹³ç¼“
- çœ‹å›¢é˜Ÿåå¥½å’Œé¡¹ç›®éœ€æ±‚

### Q4: åç¨‹å’Œçº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**ç­”**:
- åç¨‹æ˜¯è½»é‡çº§çš„ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¿è¡Œæˆåƒä¸Šä¸‡ä¸ªåç¨‹
- åç¨‹ç”± Kotlin è¿è¡Œæ—¶ç®¡ç†ï¼Œçº¿ç¨‹ç”±æ“ä½œç³»ç»Ÿç®¡ç†
- åç¨‹åˆ‡æ¢å¼€é”€å°ï¼Œçº¿ç¨‹åˆ‡æ¢å¼€é”€å¤§
- åç¨‹æ›´å®¹æ˜“å–æ¶ˆå’Œç®¡ç†ç”Ÿå‘½å‘¨æœŸ
- åç¨‹ä»£ç æ›´ç®€æ´ï¼Œé¿å…å›è°ƒåœ°ç‹±

### Q5: ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ Roomï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨ SharedPreferencesï¼Ÿ

**ç­”**:
- **SharedPreferences**: ç®€å•çš„é”®å€¼å¯¹ï¼Œå¦‚ç”¨æˆ·è®¾ç½®ã€é…ç½®
- **Room**: ç»“æ„åŒ–æ•°æ®ï¼Œéœ€è¦æŸ¥è¯¢ã€å…³è”çš„æ•°æ®
- SharedPreferences é€‚åˆå°é‡æ•°æ®
- Room é€‚åˆå¤§é‡æ•°æ®å’Œå¤æ‚æŸ¥è¯¢

## æ‰©å±•å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£

- [Android Developer](https://developer.android.com/)
- [Kotlin Official](https://kotlinlang.org/)
- [Android Architecture Components](https://developer.android.com/topic/architecture)

### æ¨èä¹¦ç±

- ã€ŠKotlin å®æˆ˜ã€‹
- ã€ŠAndroid å¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹
- ã€ŠAndroid è¿›é˜¶ä¹‹å…‰ã€‹
- ã€Šæ·±å…¥ç†è§£ Android å†…æ ¸è®¾è®¡æ€æƒ³ã€‹

### å¼€æºé¡¹ç›®

- [Now in Android](https://github.com/android/nowinandroid) - Google å®˜æ–¹ç°ä»£åŒ– Android åº”ç”¨ç¤ºä¾‹
- [Tivi](https://github.com/chrisbanes/tivi) - Chris Banes çš„å¼€æºé¡¹ç›®ï¼Œä½¿ç”¨æœ€æ–°æŠ€æœ¯æ ˆ
- [Android Architecture Samples](https://github.com/android/architecture-samples) - å„ç§æ¶æ„æ¨¡å¼ç¤ºä¾‹

### ç¤¾åŒºèµ„æº

- [Android Developers Blog](https://android-developers.googleblog.com/)
- [Kotlin Blog](https://blog.jetbrains.com/kotlin/)
- [Medium Android Tag](https://medium.com/tag/android)
- [Reddit r/androiddev](https://www.reddit.com/r/androiddev/)

## ç‰ˆæœ¬ä¿¡æ¯

- **é¡¹ç›®åˆ›å»ºæ—¥æœŸ**: 2024
- **Android Target SDK**: 36 (Android 15)
- **æœ€ä½æ”¯æŒç‰ˆæœ¬**: API 26 (Android 8.0)
- **Kotlin ç‰ˆæœ¬**: 2.0.21
- **ä¸»è¦ä¾èµ–ç‰ˆæœ¬**:
  - Hilt: 2.50
  - Coroutines: 1.7.3
  - OkHttp: 4.12.0
  - Room: 2.6.1
  - Gson: 2.10.1
  - Material: 1.12.0

## è”ç³»ä¸åé¦ˆ

å¦‚æœä½ åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹é¡¹ç›®ä¸­çš„ README æ–‡æ¡£
2. é˜…è¯»ç›¸å…³æŠ€æœ¯çš„å®˜æ–¹æ–‡æ¡£
3. æœç´¢ Stack Overflow
4. æŸ¥çœ‹é¡¹ç›®æ—¥å¿—è¾“å‡ºç†è§£æµç¨‹

ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼ğŸš€
